# Python 基础

## 包

```python
# 其实就是一个文件夹
# 但是这个文件夹中必须包含一个 __init__.py 文件 , 文件名是固定的 , 文件内容可以为空
```

## 模块

### 定义

- 一个Python文件就是一个模块

### 分类

- 内置模块(如时间模块 timer , 随机数模块 random等)
- 第三方模块
- 自定义模块

### import 引入模块

#### 项目工程目录下

```python
# 在项目工程目录下,有两个py文件,一个为bin.py,一个为cal.py,如果bin.py需要引入cal.py模块

# 引入cal模块
import cal

# 调用cal模块中的方法
print(cal.add(1, 2))
print(cal.sub(5, 4))
```

#### 包名录下 

```python
# 假设项目工程下面,存在一个module_lib1包,包中存在一个cal2.py文件
# 项目工程目录下的bin.py引入cal2模块

import module_lib1.cal2
```

#### 多模块的引入

```python
# bin.py文件想同时引入cal.py模块(在项目工程目录下)与内置time模块
```

```python
# 方式一
import cal
import time

print(cal.add(1, 2))
print(time.time())
```

```python
# 方式二
import cal, time

print(cal.add(1, 2))
print(time.time())
```

### import 模块职责

- 执行被调用模块的文件

  - 如果一个Python文件可能被其他Python文件调用,那么这个Python文件不要直接将调用的代码写在根中,应该写在方法内,测试的方法需要通过下面的代码进行判断

  ```python
  if __name__ == '__main__':
  	# 写测试逻辑
  ```

- 引入变量名

### from 引入模块

- 方式一

```python
# 假设项目工程下面,存在一个module_lib1包,包中存在一个cal2.py文件
# 项目工程目录下的bin.py引入cal2模块

from module_lib1 import cal2

print(cal2.add(1, 2))
```

- 方式二

```python
# 格式
# from 文件名 import 方法名

from module_lib1.cal2 import add, sub

print(add(1, 2))
print(sub(3, 2))
```

- 方式三(不推荐)

```python
# 引入cal2中所有的方法
# 不推荐原因:函数可能被覆盖

from module_lib1.cal2 import *

print(add(1, 2))
print(sub(3, 2))
```

- 方式的三的弊端

```python
# 不推荐原因:函数可能被覆盖

from cal import *


def add(x, y):
    return x + y + 100


# 同名函数情况下,自定义的add覆盖了cal中的add方法
print(add(1, 2))  # 103
```

```python
def add(x, y):
    return x + y + 100


from cal import *

# 同名函数情况下,cal中的add方法覆盖了自定义的add
print(add(1, 2))  # 3
```

### 导包的路径查询过程

```python
import sys

# 会从这个列表中依次找模块,找不到,直接报错
print(sys.path)

# 主要包含了工程的根目录和Python环境的一些目录
"""
['/Users/chenjiawei/code/study/python/temp/Demo1', '/Users/chenjiawei/code/study/python/temp/Demo1', '/Users/chenjiawei/anaconda3/lib/python36.zip', '/Users/chenjiawei/anaconda3/lib/python3.6', '/Users/chenjiawei/anaconda3/lib/python3.6/lib-dynload', '/Users/chenjiawei/anaconda3/lib/python3.6/site-packages', '/Users/chenjiawei/anaconda3/lib/python3.6/site-packages/aeosa', '/Applications/PyCharm.app/Contents/helpers/pycharm_matplotlib_backend']
"""
```

### 多级包的引用

```python
from module_lib2.module_lib2_inner1.module_lib2_inner2 import cal

print(cal.add(1, 3))
```

```python
from module_lib2.module_lib2_inner1.module_lib2_inner2.cal import add

print(add(1, 4))
```

### \_\_name\_\_的作用

```python
# 当某个py文件单独执行的时候, __name__ 的值为 __main__
# 当以被其他文件调用的方式引用时,值为包名

# 主要用于测试当前模块功能
```

```python
# 标准写法
if __name__ == '__main__':
    # 测试逻辑
```

### as 起别名

- 解决名称过长的问题
- 解决名称重复的问题

```python
# 一旦起别名后,无法直接通过原来函数的名称进行调用
from module_lib1.cal2 import add as add2

# add(1, 2) 这是无法进行调用的
print(add2(1, 2))
```

## Python 内置模块 time 时间模块

### 引入

```python
import time
```

### 获取时间戳

- 从1970年开始计算
- 返回值是一个浮点数,代表经过的时间(单位:秒)

```python
time.time()
```

### 当地时间

- 返回的是一个struct_time对象(结构化时间对象)

```python
value1 = time.localtime()  # time.struct_time(tm_year=2018, tm_mon=6, tm_mday=24, tm_hour=20, tm_min=43, tm_sec=51, tm_wday=6, tm_yday=175, tm_isdst=0)
print(value1)

# 年
print(value1.tm_year)  # 2018
# 星期 从0开始 0:周一 6:周日
print(value1.tm_wday)
```

### 世界标准时间(UTC) 0时区时间

```python
print(time.gmtime())  # time.struct_time(tm_year=2018, tm_mon=6, tm_mday=24, tm_hour=12, tm_min=49, tm_sec=42, tm_wday=6, tm_yday=175, tm_isdst=0)
```

### 时间戳转换为结构化时间

```python
# 参数为秒值
value1 = time.localtime(time.time())
```

### 结构化时间转换为时间戳

```python
print(time.mktime(time.localtime()))  # 1529845012.0
```

### 结构化时间转换为字符串时间

```python
# %Y 年
# %m 月
# %d 日
# %X 时分秒
# %H 小时
# %M 分
# %S 秒

print(time.strftime('%Y-%m-%d %X', time.localtime()))  # 2018-06-24 21:01:47
```

### 字符串时间转换为结构化时间

```python
print(time.strptime('2018-01-01 12:00:00', '%Y-%m-%d %X'))  
# time.struct_time(tm_year=2018, tm_mon=1, tm_mday=1, tm_hour=12, tm_min=0, tm_sec=0, tm_wday=0, tm_yday=1, tm_isdst=-1)

print(time.strptime('2018-01-01 20:11:20', '%Y-%m-%d %H:%M:%S'))
```

### asctime 与 ctime

- 将一个结构化时间显示为固定样式  结构化时间->字符串时间

```python
print(time.asctime())  # Sun Jun 24 21:09:44 2018
```

- 将一个时间戳显示为固定样式     时间戳->字符串时间

```python
print(time.ctime())  # Sun Jun 24 21:09:44 2018
```

## Python 内置模块 datetime 时间模块

```python
import datetime

# 获取当前的时间,时间的格式是固定的
print(datetime.datetime.now())  # 2018-06-24 21:14:51.418885
```

## Python 内置模块 random 随机数模块

### 引入

```python
import random
```

### 常用方法

```python
# (0,1) 浮点数
value1 = random.random()
print(value1)

# [1,3] 整型
value1 = random.randint(1, 3)
print(value1)

# [1,3)
print(random.randrange(1, 3))

# 1, '哈哈', [4, 5, 10] 中取1个
print(random.choice([1, '哈哈', [4, 5, 10]]))

# 1, '哈哈', [4, 5, 10] 中取2个 组成一个列表
print(random.sample([1, '哈哈', [4, 5, 10]], 2))

# 任意范围的浮点型
print(random.uniform(1, 3))

# 打乱次序,类似于扑克中的洗牌
list1 = [1, 3, 4, 5, 6]
random.shuffle(list1)
print(list1)
```

### 案例

```python
# 生成10位数字和字母的验证码
import random

def code():
    res = ''
    for item in range(10):
        num = random.randint(0, 9)
        alf = chr(random.randint(65, 122))
        value = str(random.choice([num, alf]))
        res += value
    return res


print(code())
```

